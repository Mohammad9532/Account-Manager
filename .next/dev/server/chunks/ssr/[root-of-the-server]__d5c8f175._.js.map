{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/src/utils/constants.js"],"sourcesContent":["export const TRANSACTION_TYPES = {\r\n    CREDIT: 'Money In',\r\n    DEBIT: 'Money Out',\r\n};\r\n\r\nexport const SCOPES = {\r\n    MANAGER: 'manager',\r\n    DAILY: 'daily'\r\n};\r\n\r\nexport const CATEGORIES = [\r\n    'Salary',\r\n    'Housing',\r\n    'Recharge',\r\n    'Loan Return',\r\n    'Interest',\r\n    'Profit',\r\n    'Expense',\r\n    'Udhaar',\r\n    'Invest',\r\n    'Food',\r\n    'Transport',\r\n    'Shopping',\r\n    'Medical',\r\n    'Education',\r\n    'Other'\r\n];\r\n\r\nexport const CATEGORY_COLORS = {\r\n    Salary: 'text-green-500',\r\n    Housing: 'text-orange-500',\r\n    Recharge: 'text-blue-500',\r\n    'Loan Return': 'text-purple-500',\r\n    Interest: 'text-yellow-500',\r\n    Profit: 'text-emerald-500',\r\n    Expense: 'text-red-500',\r\n    Udhaar: 'text-pink-500',\r\n    Invest: 'text-indigo-500',\r\n    Food: 'text-yellow-400',\r\n    Transport: 'text-blue-400',\r\n    Shopping: 'text-pink-400',\r\n    Medical: 'text-red-400',\r\n    Education: 'text-blue-300',\r\n    Other: 'text-gray-400'\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,oBAAoB;IAC7B,QAAQ;IACR,OAAO;AACX;AAEO,MAAM,SAAS;IAClB,SAAS;IACT,OAAO;AACX;AAEO,MAAM,aAAa;IACtB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACH;AAEM,MAAM,kBAAkB;IAC3B,QAAQ;IACR,SAAS;IACT,UAAU;IACV,eAAe;IACf,UAAU;IACV,QAAQ;IACR,SAAS;IACT,QAAQ;IACR,QAAQ;IACR,MAAM;IACN,WAAW;IACX,UAAU;IACV,SAAS;IACT,WAAW;IACX,OAAO;AACX"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/src/context/FinanceContext.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { TRANSACTION_TYPES, SCOPES } from '../utils/constants';\r\n\r\nconst FinanceContext = createContext();\r\n\r\nexport const useFinance = () => useContext(FinanceContext);\r\n\r\nexport const FinanceProvider = ({ children }) => {\r\n    const [transactions, setTransactions] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Initial stats structure\r\n    const [stats, setStats] = useState({\r\n        [SCOPES.MANAGER]: { totalIncome: 0, totalExpense: 0, balance: 0 },\r\n        [SCOPES.DAILY]: { totalIncome: 0, totalExpense: 0, balance: 0 }\r\n    });\r\n\r\n    // Fetch from API\r\n    const fetchTransactions = async () => {\r\n        try {\r\n            const res = await fetch('/api/transactions');\r\n            if (!res.ok) throw new Error('Failed to fetch');\r\n            const data = await res.json();\r\n            console.log(`[FinanceContext] Fetched ${data.length} transactions`);\r\n\r\n            // Sort by Date Descending (Newest First)\r\n            data.sort((a, b) => {\r\n                const dateA = a.date ? new Date(a.date).getTime() : 0;\r\n                const dateB = b.date ? new Date(b.date).getTime() : 0;\r\n                if (dateB !== dateA) return dateB - dateA;\r\n                // Tie-breaker: Newest ID first\r\n                return (b._id || '').localeCompare(a._id || '');\r\n            });\r\n            setTransactions(data);\r\n        } catch (error) {\r\n            console.error('Error fetching transactions:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchTransactions();\r\n    }, []);\r\n\r\n    // Recalculate stats whenever transactions change\r\n    useEffect(() => {\r\n        const newStats = {\r\n            [SCOPES.MANAGER]: { totalIncome: 0, totalExpense: 0, balance: 0 },\r\n            [SCOPES.DAILY]: { totalIncome: 0, totalExpense: 0, balance: 0 }\r\n        };\r\n\r\n        transactions.forEach(curr => {\r\n            const amount = parseFloat(curr.amount);\r\n            const scope = curr.scope || SCOPES.MANAGER;\r\n\r\n            if (!newStats[scope]) newStats[scope] = { totalIncome: 0, totalExpense: 0, balance: 0 };\r\n\r\n            if (curr.type === TRANSACTION_TYPES.CREDIT) {\r\n                newStats[scope].totalIncome += amount;\r\n                newStats[scope].balance += amount;\r\n            } else {\r\n                newStats[scope].totalExpense += amount;\r\n                newStats[scope].balance -= amount;\r\n            }\r\n        });\r\n\r\n        setStats(newStats);\r\n    }, [transactions]);\r\n\r\n    const addTransaction = async (transaction) => {\r\n        try {\r\n            const res = await fetch('/api/transactions', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(transaction)\r\n            });\r\n            if (res.ok) {\r\n                const saved = await res.json();\r\n                setTransactions(prev => [saved, ...prev]);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error adding transaction:', error);\r\n        }\r\n    };\r\n\r\n    const updateTransaction = async (id, data) => {\r\n        try {\r\n            const res = await fetch(`/api/transactions/${id}`, {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(data)\r\n            });\r\n            if (res.ok) {\r\n                const updated = await res.json();\r\n                setTransactions(prev => prev.map(t => t._id === id ? updated : t));\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating transaction:', error);\r\n        }\r\n    };\r\n\r\n    const deleteTransaction = async (id) => {\r\n        try {\r\n            await fetch(`/api/transactions/${id}`, { method: 'DELETE' });\r\n            setTransactions(prev => prev.filter(t => t._id !== id)); // Mongo uses _id\r\n        } catch (error) {\r\n            console.error('Error deleting transaction:', error);\r\n        }\r\n    };\r\n\r\n    const bulkAddTransactions = async (newTransactions) => {\r\n        try {\r\n            // Ideally the server should have a bulk endpoint, but for now we'll do them sequentially or in parallel\r\n            // To keep it simple and consistent with the server, let's add a bulk endpoint on the server later or just map here.\r\n            // Since we want efficiency, let's just POST them and refresh the list once.\r\n\r\n            // For now, let's assume the server doesn't have a bulk endpoint and we'll send them one by one\r\n            // but we'll optimize the UI by updating state once at the end.\r\n\r\n            const results = await Promise.all(newTransactions.map(t =>\r\n                fetch('/api/transactions', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify(t)\r\n                }).then(res => res.json())\r\n            ));\r\n\r\n            // Ensure results are sorted by date/id before merging to maintain stable UI\r\n            const sortedResults = [...results].sort((a, b) => {\r\n                const dateDiff = new Date(b.date) - new Date(a.date);\r\n                if (dateDiff !== 0) return dateDiff;\r\n                return b._id.localeCompare(a._id);\r\n            });\r\n\r\n            setTransactions(prev => {\r\n                const merged = [...sortedResults, ...prev];\r\n                // Final safety sort\r\n                return merged.sort((a, b) => {\r\n                    const dateDiff = new Date(b.date) - new Date(a.date);\r\n                    if (dateDiff !== 0) return dateDiff;\r\n                    return b._id.localeCompare(a._id);\r\n                });\r\n            });\r\n        } catch (error) {\r\n            console.error('Error bulk adding transactions:', error);\r\n        }\r\n    };\r\n\r\n    const bulkDeleteTransactions = async (ids) => {\r\n        try {\r\n            await Promise.all(ids.map(id =>\r\n                fetch(`/api/transactions/${id}`, { method: 'DELETE' })\r\n            ));\r\n            setTransactions(prev => prev.filter(t => !ids.includes(t._id)));\r\n        } catch (error) {\r\n            console.error('Error bulk deleting transactions:', error);\r\n        }\r\n    };\r\n\r\n    const getStatsByScope = (scope) => stats[scope] || stats[SCOPES.MANAGER];\r\n\r\n    const clearData = () => {\r\n        // Placeholder for future implementation or safety check\r\n        console.log('Clear Data triggered - currently restricted.');\r\n    };\r\n\r\n    return (\r\n        <FinanceContext.Provider value={{\r\n            transactions,\r\n            stats: getStatsByScope,\r\n            addTransaction,\r\n            updateTransaction,\r\n            bulkAddTransactions,\r\n            deleteTransaction,\r\n            bulkDeleteTransactions,\r\n            clearData,\r\n            loading\r\n        }}>\r\n            {children}\r\n        </FinanceContext.Provider>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 279, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/src/components/Layout.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { LayoutDashboard, Wallet, PieChart, Menu, Coffee } from 'lucide-react';\r\n\r\nconst Layout = ({ children, activeTab, setActiveTab }) => {\r\n    const NavItem = ({ icon: Icon, label, id }) => (\r\n        <button\r\n            onClick={() => setActiveTab(id)}\r\n            className={`flex items-center gap-3 w-full p-3 rounded-xl transition-all duration-300 group\r\n        ${activeTab === id\r\n                    ? 'bg-blue-600/20 text-blue-400 shadow-lg shadow-blue-900/20'\r\n                    : 'text-slate-400 hover:bg-slate-800/50 hover:text-slate-100'\r\n                }`}\r\n        >\r\n            <Icon className={`w-5 h-5 transition-transform group-hover:scale-110 ${activeTab === id ? 'animate-pulse' : ''}`} />\r\n            <span className=\"font-medium\">{label}</span>\r\n            {activeTab === id && (\r\n                <div className=\"ml-auto w-1.5 h-1.5 rounded-full bg-blue-400 shadow-[0_0_8px_rgba(96,165,250,0.8)]\" />\r\n            )}\r\n        </button>\r\n    );\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen bg-slate-950 text-slate-100 font-sans selection:bg-blue-500/30\">\r\n            {/* Sidebar */}\r\n            <aside className=\"w-64 border-r border-slate-800/50 p-6 flex flex-col gap-8 bg-slate-950/50 backdrop-blur-xl fixed h-full z-10 hidden md:flex\">\r\n                <div className=\"flex items-center gap-3 px-2\">\r\n                    <div className=\"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg shadow-lg shadow-blue-500/20\">\r\n                        <Wallet className=\"w-6 h-6 text-white\" />\r\n                    </div>\r\n                    <h1 className=\"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent\">\r\n                        MintMart\r\n                    </h1>\r\n                </div>\r\n\r\n                <nav className=\"flex-1 space-y-2\">\r\n                    <NavItem id=\"manager\" icon={LayoutDashboard} label=\"Account Manager\" />\r\n                    <NavItem id=\"daily\" icon={Coffee} label=\"Daily Expenses\" />\r\n                    <NavItem id=\"reports\" icon={PieChart} label=\"Reports\" />\r\n                </nav>\r\n\r\n                <div className=\"p-4 rounded-2xl bg-gradient-to-br from-slate-900 to-slate-800 border border-slate-700/50\">\r\n                    <p className=\"text-xs text-slate-400 mb-1\">Total Balance</p>\r\n                    <p className=\"text-lg font-bold text-emerald-400\">Available</p>\r\n                </div>\r\n            </aside>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 md:ml-64 p-4 md:p-8 overflow-y-auto max-w-7xl mx-auto w-full\">\r\n                {/* Mobile Header */}\r\n                <div className=\"md:hidden flex items-center justify-between mb-6 sticky top-0 bg-slate-950/80 backdrop-blur-lg p-2 rounded-2xl border border-slate-800/50 z-20\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg\">\r\n                            <Wallet className=\"w-5 h-5 text-white\" />\r\n                        </div>\r\n                        <span className=\"font-bold\">MintMart</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Mobile Tab Bar (Bottom) */}\r\n                <div className=\"md:hidden fixed bottom-0 left-0 right-0 bg-slate-950/90 backdrop-blur-xl border-t border-slate-800 p-2 flex justify-around z-30\">\r\n                    <button onClick={() => setActiveTab('manager')} className={`p-2 rounded-lg flex flex-col items-center gap-1 ${activeTab === 'manager' ? 'text-blue-400' : 'text-slate-500'}`}>\r\n                        <LayoutDashboard className=\"w-6 h-6\" />\r\n                        <span className=\"text-[10px]\">Manager</span>\r\n                    </button>\r\n                    <button onClick={() => setActiveTab('daily')} className={`p-2 rounded-lg flex flex-col items-center gap-1 ${activeTab === 'daily' ? 'text-blue-400' : 'text-slate-500'}`}>\r\n                        <Coffee className=\"w-6 h-6\" />\r\n                        <span className=\"text-[10px]\">Daily</span>\r\n                    </button>\r\n                    <button onClick={() => setActiveTab('reports')} className={`p-2 rounded-lg flex flex-col items-center gap-1 ${activeTab === 'reports' ? 'text-blue-400' : 'text-slate-500'}`}>\r\n                        <PieChart className=\"w-6 h-6\" />\r\n                        <span className=\"text-[10px]\">Reports</span>\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20 md:pb-0\">\r\n                    {children}\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Layout;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAHA;;;;AAKA,MAAM,SAAS,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,YAAY,EAAE;IACjD,MAAM,UAAU,CAAC,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,iBACtC,8OAAC;YACG,SAAS,IAAM,aAAa;YAC5B,WAAW,CAAC;QAChB,EAAE,cAAc,KACF,8DACA,6DACJ;;8BAEN,8OAAC;oBAAK,WAAW,CAAC,mDAAmD,EAAE,cAAc,KAAK,kBAAkB,IAAI;;;;;;8BAChH,8OAAC;oBAAK,WAAU;8BAAe;;;;;;gBAC9B,cAAc,oBACX,8OAAC;oBAAI,WAAU;;;;;;;;;;;;IAK3B,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBAAM,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;0CACX,cAAA,8OAAC,gNAAM;oCAAC,WAAU;;;;;;;;;;;0CAEtB,8OAAC;gCAAG,WAAU;0CAA+F;;;;;;;;;;;;kCAKjH,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAQ,IAAG;gCAAU,MAAM,+OAAe;gCAAE,OAAM;;;;;;0CACnD,8OAAC;gCAAQ,IAAG;gCAAQ,MAAM,gNAAM;gCAAE,OAAM;;;;;;0CACxC,8OAAC;gCAAQ,IAAG;gCAAU,MAAM,0NAAQ;gCAAE,OAAM;;;;;;;;;;;;kCAGhD,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAE,WAAU;0CAA8B;;;;;;0CAC3C,8OAAC;gCAAE,WAAU;0CAAqC;;;;;;;;;;;;;;;;;;0BAK1D,8OAAC;gBAAK,WAAU;;kCAEZ,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAU;8CACX,cAAA,8OAAC,gNAAM;wCAAC,WAAU;;;;;;;;;;;8CAEtB,8OAAC;oCAAK,WAAU;8CAAY;;;;;;;;;;;;;;;;;kCAKpC,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAO,SAAS,IAAM,aAAa;gCAAY,WAAW,CAAC,gDAAgD,EAAE,cAAc,YAAY,kBAAkB,kBAAkB;;kDACxK,8OAAC,+OAAe;wCAAC,WAAU;;;;;;kDAC3B,8OAAC;wCAAK,WAAU;kDAAc;;;;;;;;;;;;0CAElC,8OAAC;gCAAO,SAAS,IAAM,aAAa;gCAAU,WAAW,CAAC,gDAAgD,EAAE,cAAc,UAAU,kBAAkB,kBAAkB;;kDACpK,8OAAC,gNAAM;wCAAC,WAAU;;;;;;kDAClB,8OAAC;wCAAK,WAAU;kDAAc;;;;;;;;;;;;0CAElC,8OAAC;gCAAO,SAAS,IAAM,aAAa;gCAAY,WAAW,CAAC,gDAAgD,EAAE,cAAc,YAAY,kBAAkB,kBAAkB;;kDACxK,8OAAC,0NAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC;wCAAK,WAAU;kDAAc;;;;;;;;;;;;;;;;;;kCAItC,8OAAC;wBAAI,WAAU;kCACV;;;;;;;;;;;;;;;;;;AAKrB;uCAEe"}},
    {"offset": {"line": 582, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/src/components/StatsCard.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\n\r\nconst StatsCard = ({ title, amount, icon: Icon, type = 'neutral', trend, headerAction }) => {\r\n    const getColors = () => {\r\n        switch (type) {\r\n            case 'income': return 'text-emerald-400 bg-emerald-500/10 border-emerald-500/20';\r\n            case 'expense': return 'text-rose-400 bg-rose-500/10 border-rose-500/20';\r\n            default: return 'text-blue-400 bg-blue-500/10 border-blue-500/20';\r\n        }\r\n    };\r\n\r\n    const style = getColors();\r\n\r\n    return (\r\n        <div className=\"relative p-6 rounded-2xl bg-slate-900 border border-slate-800 backdrop-blur-sm shadow-xl group hover:border-slate-700/80 transition-all duration-300\">\r\n            <div className=\"flex items-start justify-between mb-4\">\r\n                <div className=\"w-full\">\r\n                    {/* Header Row with Action */}\r\n                    <div className=\"flex items-start justify-between w-full mb-1\">\r\n                        <h3 className=\"text-slate-400 text-sm font-medium\">{title}</h3>\r\n                        {headerAction && <div className=\"ml-2\">{headerAction}</div>}\r\n                    </div>\r\n                    <p className=\"text-2xl font-bold tracking-tight text-white group-hover:scale-105 transition-transform origin-left\">\r\n                        ₹{Math.abs(amount).toLocaleString('en-IN', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}\r\n                    </p>\r\n                </div>\r\n                <div className={`p-3 rounded-xl ${style} group-hover:ring-2 ring-offset-2 ring-offset-slate-950 ring-current transition-all duration-500`}>\r\n                    <Icon className=\"w-6 h-6\" />\r\n                </div>\r\n            </div>\r\n\r\n            {trend && (\r\n                <div className=\"flex items-center gap-2 text-xs\">\r\n                    <span className={trend > 0 ? 'text-emerald-400' : 'text-rose-400'}>\r\n                        {trend > 0 ? '+' : ''}{trend}%\r\n                    </span>\r\n                    <span className=\"text-slate-600\">vs last month</span>\r\n                </div>\r\n            )}\r\n\r\n            <div className={`absolute inset-x-0 bottom-0 h-1 rounded-b-2xl opacity-20 ${type === 'income' ? 'bg-emerald-500' : type === 'expense' ? 'bg-rose-500' : 'bg-blue-500'\r\n                }`} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StatsCard;\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIA,MAAM,YAAY,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,IAAI,EAAE,OAAO,SAAS,EAAE,KAAK,EAAE,YAAY,EAAE;IACnF,MAAM,YAAY;QACd,OAAQ;YACJ,KAAK;gBAAU,OAAO;YACtB,KAAK;gBAAW,OAAO;YACvB;gBAAS,OAAO;QACpB;IACJ;IAEA,MAAM,QAAQ;IAEd,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CAEX,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAG,WAAU;kDAAsC;;;;;;oCACnD,8BAAgB,8OAAC;wCAAI,WAAU;kDAAQ;;;;;;;;;;;;0CAE5C,8OAAC;gCAAE,WAAU;;oCAAsG;oCAC7G,KAAK,GAAG,CAAC,QAAQ,cAAc,CAAC,SAAS;wCAAE,uBAAuB;wCAAG,uBAAuB;oCAAE;;;;;;;;;;;;;kCAGxG,8OAAC;wBAAI,WAAW,CAAC,eAAe,EAAE,MAAM,gGAAgG,CAAC;kCACrI,cAAA,8OAAC;4BAAK,WAAU;;;;;;;;;;;;;;;;;YAIvB,uBACG,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAK,WAAW,QAAQ,IAAI,qBAAqB;;4BAC7C,QAAQ,IAAI,MAAM;4BAAI;4BAAM;;;;;;;kCAEjC,8OAAC;wBAAK,WAAU;kCAAiB;;;;;;;;;;;;0BAIzC,8OAAC;gBAAI,WAAW,CAAC,yDAAyD,EAAE,SAAS,WAAW,mBAAmB,SAAS,YAAY,gBAAgB,eAClJ;;;;;;;;;;;;AAGlB;uCAEe"}},
    {"offset": {"line": 725, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/src/components/LedgerTable.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { ArrowRight } from 'lucide-react';\r\nimport { useFinance } from '../context/FinanceContext';\r\nimport { SCOPES, TRANSACTION_TYPES } from '../utils/constants';\r\n\r\nconst LedgerTable = ({ limit, scope = SCOPES.MANAGER, onRowClick }) => {\r\n    const { transactions, loading } = useFinance();\r\n\r\n    // Group transactions by Description (Particulars)\r\n    const aggregatedLedger = useMemo(() => {\r\n        const groups = {};\r\n        // Use empty array if still loading to avoid iteration errors\r\n        if (!transactions) return [];\r\n        // ...\r\n\r\n        transactions.forEach(t => {\r\n            // Filter by scope\r\n            if ((t.scope || SCOPES.MANAGER) !== scope) return;\r\n\r\n            const name = (t.description || 'Unknown').trim();\r\n            const key = name.toLowerCase();\r\n\r\n            if (!groups[key]) {\r\n                groups[key] = {\r\n                    name, // Display name (from first encounter)\r\n                    netBalance: 0,\r\n                    lastDate: t.date,\r\n                    count: 0\r\n                };\r\n            }\r\n\r\n            // Calculate Net Balance (Aggregate)\r\n            const amount = parseFloat(t.amount);\r\n            if (t.type === TRANSACTION_TYPES.CREDIT) {\r\n                groups[key].netBalance += amount;\r\n            } else {\r\n                groups[key].netBalance -= amount;\r\n            }\r\n\r\n            groups[key].count += 1;\r\n\r\n            // Keep track of latest interaction\r\n            if (new Date(t.date) > new Date(groups[key].lastDate)) {\r\n                groups[key].lastDate = t.date;\r\n            }\r\n        });\r\n\r\n        const result = Object.values(groups).sort((a, b) => new Date(b.lastDate) - new Date(a.lastDate));\r\n        return limit ? result.slice(0, limit) : result;\r\n\r\n    }, [transactions, scope, limit]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex justify-center p-8 text-slate-500\">\r\n                Loading Ledger...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (aggregatedLedger.length === 0) {\r\n        return (\r\n            <div className=\"p-12 text-center text-slate-500 bg-slate-900/50 rounded-2xl border border-slate-800 border-dashed\">\r\n                No active ledgers found.\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"overflow-x-auto rounded-2xl border border-slate-800 shadow-xl\">\r\n            <table className=\"w-full text-left border-collapse\">\r\n                <thead>\r\n                    <tr className=\"bg-slate-900/80 text-slate-400 text-sm uppercase tracking-wider\">\r\n                        <th className=\"p-4 border-b border-slate-800 w-16 text-center\">S.No</th>\r\n                        <th className=\"p-4 border-b border-slate-800\">Particulars</th>\r\n                        <th className=\"p-4 border-b border-slate-800 text-right text-emerald-500\">Credit (Net)</th>\r\n                        <th className=\"p-4 border-b border-slate-800 text-right text-rose-500\">Debit (Net)</th>\r\n                        <th className=\"p-4 border-b border-slate-800 w-16 text-center\"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody className=\"bg-slate-900/30 divide-y divide-slate-800/50\">\r\n                    {aggregatedLedger.map((row, index) => {\r\n                        const isCredit = row.netBalance >= 0;\r\n                        const absBalance = Math.abs(row.netBalance);\r\n\r\n                        // Reconstruct a transaction-like object for the click handler\r\n                        const mockTransaction = { description: row.name };\r\n\r\n                        return (\r\n                            <tr key={index} className=\"hover:bg-white/5 transition-colors group\">\r\n                                <td className=\"p-4 text-center text-slate-500 font-mono text-sm\">\r\n                                    {index + 1}\r\n                                </td>\r\n                                <td className=\"p-4\">\r\n                                    <button\r\n                                        onClick={() => onRowClick && onRowClick(mockTransaction)}\r\n                                        className=\"font-medium text-slate-200 hover:text-blue-400 hover:underline text-left text-lg\"\r\n                                    >\r\n                                        {row.name}\r\n                                    </button>\r\n                                    <div className=\"text-xs text-slate-500\">\r\n                                        Last active: {new Date(row.lastDate).toLocaleDateString()}\r\n                                    </div>\r\n                                </td>\r\n                                <td className=\"p-4 text-right font-mono font-bold text-emerald-400 text-lg\">\r\n                                    {isCredit && absBalance > 0 ? `₹${absBalance.toLocaleString()}` : '-'}\r\n                                </td>\r\n                                <td className=\"p-4 text-right font-mono font-bold text-rose-400 text-lg\">\r\n                                    {!isCredit && absBalance > 0 ? `₹${absBalance.toLocaleString()}` : '-'}\r\n                                </td>\r\n                                <td className=\"p-4 text-center text-slate-600\">\r\n                                    <button\r\n                                        onClick={() => onRowClick && onRowClick(mockTransaction)}\r\n                                        className=\"p-2 hover:bg-slate-800 rounded-full transition-all opacity-0 group-hover:opacity-100\"\r\n                                    >\r\n                                        <ArrowRight className=\"w-4 h-4\" />\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                        );\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LedgerTable;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 976, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/src/components/LedgerForm.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Book, X } from 'lucide-react';\r\nimport { useFinance } from '../context/FinanceContext';\r\nimport { SCOPES, TRANSACTION_TYPES } from '../utils/constants';\r\n\r\nconst LedgerForm = ({ onClose }) => {\r\n    const { addTransaction } = useFinance();\r\n    const [name, setName] = useState('');\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        if (!name.trim()) return;\r\n\r\n        addTransaction({\r\n            description: name, // The Ledger Name\r\n            amount: 0,         // Initialize with 0\r\n            type: TRANSACTION_TYPES.CREDIT, // Default (placeholder)\r\n            category: 'Ledger',\r\n            scope: SCOPES.MANAGER\r\n        });\r\n\r\n        if (onClose) onClose();\r\n        else setName('');\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"p-6 rounded-2xl bg-slate-900 border border-slate-800 shadow-xl max-w-sm w-full relative\">\r\n            <div className=\"flex items-center gap-3 mb-6\">\r\n                <div className=\"p-3 bg-blue-500/10 rounded-xl text-blue-400\">\r\n                    <Book className=\"w-6 h-6\" />\r\n                </div>\r\n                <div>\r\n                    <h2 className=\"text-xl font-bold text-white\">New Ledger</h2>\r\n                    <p className=\"text-xs text-slate-400\">Create a new account/party</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n                <div>\r\n                    <label className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 block\">\r\n                        Ledger Name\r\n                    </label>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={name}\r\n                        onChange={(e) => setName(e.target.value)}\r\n                        className=\"w-full bg-slate-950 border border-slate-800 text-white rounded-xl py-3 px-4 focus:outline-none focus:border-blue-500 font-medium\"\r\n                        placeholder=\"e.g. Rafey, HDFC, Salary...\"\r\n                        autoFocus\r\n                        required\r\n                    />\r\n                </div>\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"w-full py-3.5 rounded-xl font-bold text-white bg-blue-600 hover:bg-blue-500 shadow-lg shadow-blue-500/20 active:scale-[0.98] transition-all\"\r\n                >\r\n                    Create Ledger\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default LedgerForm;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,aAAa,CAAC,EAAE,OAAO,EAAE;IAC3B,MAAM,EAAE,cAAc,EAAE,GAAG,IAAA,+IAAU;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IAEjC,MAAM,eAAe,CAAC;QAClB,EAAE,cAAc;QAChB,IAAI,CAAC,KAAK,IAAI,IAAI;QAElB,eAAe;YACX,aAAa;YACb,QAAQ;YACR,MAAM,8IAAiB,CAAC,MAAM;YAC9B,UAAU;YACV,OAAO,mIAAM,CAAC,OAAO;QACzB;QAEA,IAAI,SAAS;aACR,QAAQ;IACjB;IAEA,qBACI,8OAAC;QAAK,UAAU;QAAc,WAAU;;0BACpC,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC,0MAAI;4BAAC,WAAU;;;;;;;;;;;kCAEpB,8OAAC;;0CACG,8OAAC;gCAAG,WAAU;0CAA+B;;;;;;0CAC7C,8OAAC;gCAAE,WAAU;0CAAyB;;;;;;;;;;;;;;;;;;0BAI9C,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;;0CACG,8OAAC;gCAAM,WAAU;0CAA2E;;;;;;0CAG5F,8OAAC;gCACG,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;gCACvC,WAAU;gCACV,aAAY;gCACZ,SAAS;gCACT,QAAQ;;;;;;;;;;;;kCAIhB,8OAAC;wBACG,MAAK;wBACL,WAAU;kCACb;;;;;;;;;;;;;;;;;;AAMjB;uCAEe"}},
    {"offset": {"line": 1117, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/src/components/TransactionForm.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Plus, Minus, Calendar, Tag, Type } from 'lucide-react';\r\nimport { TRANSACTION_TYPES, CATEGORIES, SCOPES } from '../utils/constants';\r\nimport { useFinance } from '../context/FinanceContext';\r\n\r\nconst TransactionForm = ({ onClose, scope = SCOPES.MANAGER, initialData = {} }) => {\r\n    const { addTransaction, updateTransaction } = useFinance();\r\n    const [formData, setFormData] = useState({\r\n        type: TRANSACTION_TYPES.DEBIT,\r\n        amount: '',\r\n        category: 'Food',\r\n        description: '',\r\n        date: new Date().toISOString().split('T')[0],\r\n        ...initialData // Override defaults with initial data\r\n    });\r\n\r\n    const isManager = scope === SCOPES.MANAGER;\r\n\r\n    // Ensure initialData updates if it changes while mounted\r\n    useEffect(() => {\r\n        if (initialData && Object.keys(initialData).length > 0) {\r\n            setFormData(prev => ({ ...prev, ...initialData }));\r\n        }\r\n    }, [initialData]);\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        if (!formData.amount || !formData.description) return;\r\n\r\n        if (formData._id) {\r\n            updateTransaction(formData._id, {\r\n                ...formData,\r\n                amount: parseFloat(formData.amount),\r\n                scope\r\n            });\r\n        } else {\r\n            addTransaction({\r\n                ...formData,\r\n                amount: parseFloat(formData.amount),\r\n                scope\r\n            });\r\n        }\r\n\r\n        // If it's a one-off entry from clicking a row, we usually want to close immediately\r\n        if (onClose) onClose();\r\n        else setFormData(prev => ({ ...prev, amount: '', description: '' }));\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"p-6 rounded-2xl bg-slate-900 border border-slate-800 shadow-xl max-w-lg w-full\">\r\n            <h2 className=\"text-xl font-bold text-white mb-6 flex items-center gap-2\">\r\n                {formData._id ? 'Edit Entry' : (isManager ? (initialData.description ? `Add Entry for ${initialData.description}` : 'Add Ledger Entry') : 'Add Daily Expense')}\r\n            </h2>\r\n\r\n            <div className=\"grid gap-6\">\r\n                {!isManager ? (\r\n                    /* Hidden for Daily: Automatically Money Out */\r\n                    <div className=\"hidden\"></div>\r\n                ) : (\r\n                    <div className=\"grid grid-cols-2 gap-4 p-1 bg-slate-950 rounded-xl border border-slate-800\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => setFormData({ ...formData, type: TRANSACTION_TYPES.CREDIT })}\r\n                            className={`flex items-center justify-center gap-2 py-3 rounded-lg font-medium transition-all ${formData.type === TRANSACTION_TYPES.CREDIT\r\n                                ? 'bg-emerald-500/10 text-emerald-400 shadow-inner'\r\n                                : 'text-slate-500 hover:text-slate-300'\r\n                                }`}\r\n                        >\r\n                            <Plus className=\"w-4 h-4\" /> Credit (In)\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => setFormData({ ...formData, type: TRANSACTION_TYPES.DEBIT })}\r\n                            className={`flex items-center justify-center gap-2 py-3 rounded-lg font-medium transition-all ${formData.type === TRANSACTION_TYPES.DEBIT\r\n                                ? 'bg-rose-500/10 text-rose-400 shadow-inner'\r\n                                : 'text-slate-500 hover:text-slate-300'\r\n                                }`}\r\n                        >\r\n                            <Minus className=\"w-4 h-4\" /> Debit (Out)\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                <div>\r\n                    <label className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 block\">Amount</label>\r\n                    <div className=\"relative group\">\r\n                        <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold\">₹</span>\r\n                        <input\r\n                            type=\"number\"\r\n                            value={formData.amount}\r\n                            onChange={(e) => setFormData({ ...formData, amount: e.target.value })}\r\n                            className=\"w-full bg-slate-950 border border-slate-800 text-white rounded-xl py-4 pl-10 pr-4 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all font-bold text-lg\"\r\n                            placeholder=\"0.00\"\r\n                            autoFocus\r\n                            required\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                        <label className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 block\">\r\n                            {isManager ? 'Type' : 'Category'}\r\n                        </label>\r\n                        <div className=\"relative\">\r\n                            <Tag className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n                            <select\r\n                                value={formData.category}\r\n                                onChange={(e) => setFormData({ ...formData, category: e.target.value })}\r\n                                className=\"w-full bg-slate-950 border border-slate-800 text-white rounded-xl py-3 pl-10 pr-4 focus:outline-none focus:border-blue-500 appearance-none cursor-pointer\"\r\n                            >\r\n                                {CATEGORIES.map(c => <option key={c} value={c}>{c}</option>)}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 block\">Date</label>\r\n                        <div className=\"relative\">\r\n                            <Calendar className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n                            <input\r\n                                type=\"date\"\r\n                                value={formData.date}\r\n                                onChange={(e) => setFormData({ ...formData, date: e.target.value })}\r\n                                className=\"w-full bg-slate-950 border border-slate-800 text-white rounded-xl py-3 pl-10 pr-4 focus:outline-none focus:border-blue-500\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div>\r\n                    <label className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 block\">\r\n                        {isManager ? 'Particulars (Person / Description)' : 'Description'}\r\n                    </label>\r\n                    <div className=\"relative\">\r\n                        <Type className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.description}\r\n                            onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                            className=\"w-full bg-slate-950 border border-slate-800 text-white rounded-xl py-3 pl-10 pr-4 focus:outline-none focus:border-blue-500\"\r\n                            placeholder={isManager ? \"e.g. Rafey, Salary, HDFC...\" : \"What was this for?\"}\r\n                            required\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    className={`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-transform active:scale-[0.98] ${formData.type === TRANSACTION_TYPES.CREDIT\r\n                        ? 'bg-emerald-500 hover:bg-emerald-600 shadow-emerald-500/20'\r\n                        : 'bg-rose-500 hover:bg-rose-600 shadow-rose-500/20'\r\n                        }`}\r\n                >\r\n                    {formData._id ? 'Update Entry' : (isManager ? 'Save Entry' : 'Add Transaction')}\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default TransactionForm;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1485, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/src/components/LedgerDetailView.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport * as XLSX from 'xlsx';\r\nimport { ArrowLeft, Wallet, TrendingUp, TrendingDown, Plus, X, Trash2, Download, Upload, FileJson, Check, AlertCircle, Pencil } from 'lucide-react';\r\nimport { useFinance } from '../context/FinanceContext';\r\nimport { TRANSACTION_TYPES, CATEGORY_COLORS, SCOPES } from '../utils/constants';\r\nimport TransactionForm from './TransactionForm';\r\n\r\nconst LedgerDetailView = ({ ledgerName, onBack }) => {\r\n    const { transactions, deleteTransaction, bulkAddTransactions, bulkDeleteTransactions } = useFinance();\r\n    const [showAddModal, setShowAddModal] = useState(false);\r\n    const [importPreviewData, setImportPreviewData] = useState(null);\r\n    const [selectedIds, setSelectedIds] = useState([]);\r\n    const [isImporting, setIsImporting] = useState(false);\r\n    const [editingTransaction, setEditingTransaction] = useState(null);\r\n\r\n    // Sorting and Filtering State\r\n    const [sortBy, setSortBy] = useState('newest'); // 'newest', 'oldest', 'highest', 'lowest'\r\n    const [filterCategory, setFilterCategory] = useState('All');\r\n\r\n    // Filter transactions for this specific ledger name\r\n    // Filter and Sort transactions for this specific ledger name\r\n    const ledgerTransactions = useMemo(() => {\r\n        let filtered = transactions.filter(t =>\r\n            t.scope === SCOPES.MANAGER &&\r\n            t.description.toLowerCase() === ledgerName.toLowerCase()\r\n        );\r\n\r\n        // Apply Category Filter\r\n        if (filterCategory !== 'All') {\r\n            filtered = filtered.filter(t => t.category === filterCategory);\r\n        }\r\n\r\n        // Apply Sorting\r\n        return filtered.sort((a, b) => {\r\n            switch (sortBy) {\r\n                case 'oldest':\r\n                    return new Date(a.date) - new Date(b.date);\r\n                case 'highest':\r\n                    return b.amount - a.amount;\r\n                case 'lowest':\r\n                    return a.amount - b.amount;\r\n                case 'newest':\r\n                default:\r\n                    const dateDiff = new Date(b.date) - new Date(a.date);\r\n                    if (dateDiff !== 0) return dateDiff;\r\n                    // Secondary sort for stable order\r\n                    return (b._id || '').localeCompare(a._id || '');\r\n            }\r\n        });\r\n    }, [transactions, ledgerName, sortBy, filterCategory]);\r\n\r\n    // Get unique categories for filtering\r\n    const availableCategories = useMemo(() => {\r\n        const cats = transactions\r\n            .filter(t => t.description.toLowerCase() === ledgerName.toLowerCase())\r\n            .map(t => t.category);\r\n        return ['All', ...new Set(cats)];\r\n    }, [transactions, ledgerName]);\r\n\r\n    // Template Download Logic\r\n    const handleDownloadTemplate = () => {\r\n        const templateData = [\r\n            { Date: new Date().toLocaleDateString(), Category: 'Payment Received', Credit: 1000, Debit: 0 },\r\n            { Date: new Date().toLocaleDateString(), Category: 'Payment Given', Credit: 0, Debit: 500 }\r\n        ];\r\n\r\n        const worksheet = XLSX.utils.json_to_sheet(templateData);\r\n        const workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, worksheet, \"Template\");\r\n\r\n        // Set column widths\r\n        const wscols = [{ wch: 15 }, { wch: 20 }, { wch: 12 }, { wch: 12 }];\r\n        worksheet['!cols'] = wscols;\r\n\r\n        XLSX.writeFile(workbook, `Ledger_Import_Template.xlsx`);\r\n    };\r\n\r\n    // Excel Export Logic\r\n    const handleExportExcel = () => {\r\n        const data = ledgerTransactions.map(t => ({\r\n            Date: new Date(t.date).toLocaleDateString(),\r\n            Category: t.category,\r\n            Credit: t.type === TRANSACTION_TYPES.CREDIT ? t.amount : 0,\r\n            Debit: t.type === TRANSACTION_TYPES.DEBIT ? t.amount : 0,\r\n            Type: t.type\r\n        }));\r\n\r\n        const worksheet = XLSX.utils.json_to_sheet(data);\r\n        const workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, worksheet, \"Ledger\");\r\n\r\n        const wscols = [{ wch: 15 }, { wch: 15 }, { wch: 12 }, { wch: 12 }, { wch: 15 }];\r\n        worksheet['!cols'] = wscols;\r\n\r\n        XLSX.writeFile(workbook, `${ledgerName}_Ledger.xlsx`);\r\n    };\r\n\r\n    // Excel Import Logic (Updated for Preview and fixes)\r\n    const handleImportExcel = (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n            try {\r\n                const bstr = event.target.result;\r\n                // Add cellDates: true to handle Excel date objects\r\n                const wb = XLSX.read(bstr, { type: 'binary', cellDates: true });\r\n                const wsname = wb.SheetNames[0];\r\n                const ws = wb.Sheets[wsname];\r\n                const data = XLSX.utils.sheet_to_json(ws);\r\n\r\n                // Helper to normalize dates from Excel (can be Date object or serial number)\r\n                const normalizeDate = (val) => {\r\n                    if (val instanceof Date && !isNaN(val)) return val;\r\n                    if (typeof val === 'number') {\r\n                        // Excel serial date to JS Date\r\n                        return new Date(Math.round((val - 25569) * 86400 * 1000));\r\n                    }\r\n                    if (typeof val === 'string') {\r\n                        const parsed = new Date(val);\r\n                        return !isNaN(parsed) ? parsed : new Date();\r\n                    }\r\n                    return new Date();\r\n                };\r\n\r\n                // Use flatMap to allow one row to produce multiple transaction entries\r\n                const newTxns = data.flatMap(row => {\r\n                    const credit = parseFloat(row.Credit || 0);\r\n                    const debit = parseFloat(row.Debit || 0);\r\n                    const parsedDate = normalizeDate(row.Date);\r\n                    const entries = [];\r\n\r\n                    // Create Credit entry if exists\r\n                    if (credit > 0) {\r\n                        entries.push({\r\n                            description: ledgerName,\r\n                            amount: credit,\r\n                            type: TRANSACTION_TYPES.CREDIT,\r\n                            category: row.Category || 'Payment Received',\r\n                            date: parsedDate,\r\n                            scope: SCOPES.MANAGER\r\n                        });\r\n                    }\r\n\r\n                    // Create Debit entry if exists\r\n                    if (debit > 0) {\r\n                        entries.push({\r\n                            description: ledgerName,\r\n                            amount: debit,\r\n                            type: TRANSACTION_TYPES.DEBIT,\r\n                            category: row.Category || 'Payment Given',\r\n                            date: parsedDate,\r\n                            scope: SCOPES.MANAGER\r\n                        });\r\n                    }\r\n\r\n                    return entries;\r\n                });\r\n\r\n                if (newTxns.length > 0) {\r\n                    setImportPreviewData(newTxns);\r\n                } else {\r\n                    alert(\"No valid transactions found in the file.\");\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Import error:\", err);\r\n                alert(\"Error parsing Excel file. Please use the template.\");\r\n            }\r\n            e.target.value = ''; // Reset input\r\n        };\r\n        reader.readAsBinaryString(file);\r\n    };\r\n\r\n    const confirmImport = async () => {\r\n        if (importPreviewData) {\r\n            setIsImporting(true);\r\n            try {\r\n                await bulkAddTransactions(importPreviewData);\r\n                setImportPreviewData(null);\r\n            } finally {\r\n                setIsImporting(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSelectAll = (e) => {\r\n        if (e.target.checked) {\r\n            setSelectedIds(ledgerTransactions.map(t => t._id || t.id));\r\n        } else {\r\n            setSelectedIds([]);\r\n        }\r\n    };\r\n\r\n    const toggleSelect = (id) => {\r\n        setSelectedIds(prev =>\r\n            prev.includes(id) ? prev.filter(i => i !== id) : [...prev, id]\r\n        );\r\n    };\r\n\r\n    const handleBulkDelete = async () => {\r\n        if (window.confirm(`Are you sure you want to delete ${selectedIds.length} transactions?`)) {\r\n            await bulkDeleteTransactions(selectedIds);\r\n            setSelectedIds([]);\r\n        }\r\n    };\r\n\r\n    // Calculate stats for this ledger\r\n    const stats = useMemo(() => {\r\n        return ledgerTransactions.reduce((acc, t) => {\r\n            const amount = parseFloat(t.amount);\r\n            if (t.type === TRANSACTION_TYPES.CREDIT) {\r\n                acc.totalCredit += amount;\r\n                acc.balance += amount;\r\n            } else {\r\n                acc.totalDebit += amount;\r\n                acc.balance -= amount;\r\n            }\r\n            return acc;\r\n        }, { totalCredit: 0, totalDebit: 0, balance: 0 });\r\n    }, [ledgerTransactions]);\r\n\r\n    const statusColor = stats.balance >= 0 ? 'text-emerald-400' : 'text-rose-400';\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-in fade-in slide-in-from-right-8 duration-300\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center gap-4\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"p-2 rounded-xl bg-slate-900 border border-slate-800 text-slate-400 hover:text-white hover:bg-slate-800 transition-all\"\r\n                >\r\n                    <ArrowLeft className=\"w-5 h-5\" />\r\n                </button>\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-white\">{ledgerName}</h2>\r\n                    <p className=\"text-slate-400 text-sm\">Ledger Details</p>\r\n                </div>\r\n\r\n                <div className=\"ml-auto flex items-center gap-3\">\r\n                    {/* Bulk Actions */}\r\n                    {selectedIds.length > 0 && (\r\n                        <div className=\"flex items-center gap-2 mr-4 bg-rose-500/10 border border-rose-500/20 px-3 py-1.5 rounded-xl animate-in zoom-in-95 duration-200\">\r\n                            <span className=\"text-rose-400 text-sm font-bold\">{selectedIds.length} Selected</span>\r\n                            <button\r\n                                onClick={handleBulkDelete}\r\n                                className=\"flex items-center gap-2 bg-rose-600 hover:bg-rose-500 text-white px-3 py-1 rounded-lg text-sm font-bold transition-all active:scale-95\"\r\n                            >\r\n                                <Trash2 className=\"w-4 h-4\" />\r\n                                Delete\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Template and Excel Actions */}\r\n                    <div className=\"flex items-center gap-2 mr-4 border-r border-slate-800 pr-4\">\r\n                        <button\r\n                            onClick={handleDownloadTemplate}\r\n                            className=\"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-slate-300 px-3 py-2 rounded-xl text-sm transition-all border border-slate-700\"\r\n                            title=\"Download Template\"\r\n                        >\r\n                            <FileJson className=\"w-4 h-4\" />\r\n                            <span className=\"hidden lg:inline\">Template</span>\r\n                        </button>\r\n                        <label className=\"cursor-pointer flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-slate-300 px-3 py-2 rounded-xl text-sm transition-all border border-slate-700\">\r\n                            <Upload className=\"w-4 h-4\" />\r\n                            <span>Import</span>\r\n                            <input type=\"file\" className=\"hidden\" accept=\".xlsx, .xls\" onChange={handleImportExcel} />\r\n                        </label>\r\n                        <button\r\n                            onClick={handleExportExcel}\r\n                            className=\"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-slate-300 px-3 py-2 rounded-xl text-sm transition-all border border-slate-700\"\r\n                        >\r\n                            <Download className=\"w-4 h-4\" />\r\n                            <span>Export</span>\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"text-right hidden sm:block mr-2\">\r\n                        <p className=\"text-xs text-slate-500 uppercase font-bold\">Current Status</p>\r\n                        <p className={`text-xl font-bold ${stats.balance >= 0 ? 'text-rose-400' : 'text-emerald-400'}`}>\r\n                            ₹{Math.abs(stats.balance).toLocaleString('en-IN')}\r\n                            <span className=\"text-xs ml-1 opacity-80 uppercase tracking-tighter\">\r\n                                {stats.balance >= 0 ? '(Payable)' : '(Receivable)'}\r\n                            </span>\r\n                        </p>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setShowAddModal(true)}\r\n                        className=\"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-xl font-medium shadow-lg shadow-blue-500/20 active:scale-95 transition-all\"\r\n                    >\r\n                        <Plus className=\"w-5 h-5\" />\r\n                        <span className=\"hidden sm:inline\">Add Entry</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Stats Cards (Mini) */}\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                <div className=\"p-4 bg-slate-900/50 rounded-xl border border-slate-800\">\r\n                    <div className=\"text-slate-500 text-xs uppercase font-bold mb-1\">Total Credit</div>\r\n                    <div className=\"text-lg font-mono font-bold text-emerald-400\">₹{stats.totalCredit.toLocaleString()}</div>\r\n                </div>\r\n                <div className=\"p-4 bg-slate-900/50 rounded-xl border border-slate-800\">\r\n                    <div className=\"text-slate-500 text-xs uppercase font-bold mb-1\">Total Debit</div>\r\n                    <div className=\"text-lg font-mono font-bold text-rose-400\">₹{stats.totalDebit.toLocaleString()}</div>\r\n                </div>\r\n\r\n                {/* Sorting and Filtering UI */}\r\n                <div className=\"col-span-2 flex items-center gap-3\">\r\n                    <div className=\"flex-1\">\r\n                        <label className=\"text-[10px] text-slate-500 uppercase font-bold ml-1 mb-1 block\">Sort By</label>\r\n                        <select\r\n                            value={sortBy}\r\n                            onChange={(e) => setSortBy(e.target.value)}\r\n                            className=\"w-full bg-slate-900 border border-slate-800 text-slate-300 rounded-xl px-3 py-2 text-sm focus:outline-none focus:border-blue-500 transition-all appearance-none cursor-pointer\"\r\n                        >\r\n                            <option value=\"newest\">Newest First</option>\r\n                            <option value=\"oldest\">Oldest First</option>\r\n                            <option value=\"highest\">Highest Amount</option>\r\n                            <option value=\"lowest\">Lowest Amount</option>\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                        <label className=\"text-[10px] text-slate-500 uppercase font-bold ml-1 mb-1 block\">Category</label>\r\n                        <select\r\n                            value={filterCategory}\r\n                            onChange={(e) => setFilterCategory(e.target.value)}\r\n                            className=\"w-full bg-slate-900 border border-slate-800 text-slate-300 rounded-xl px-3 py-2 text-sm focus:outline-none focus:border-blue-500 transition-all appearance-none cursor-pointer\"\r\n                        >\r\n                            {availableCategories.map(cat => (\r\n                                <option key={cat} value={cat}>{cat}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Transaction History Table */}\r\n            <div className=\"bg-slate-900/30 rounded-2xl border border-slate-800 overflow-hidden\">\r\n                <table className=\"w-full text-left border-collapse\">\r\n                    <thead className=\"bg-slate-900/80 text-slate-400 text-xs uppercase tracking-wider\">\r\n                        <tr>\r\n                            <th className=\"p-4 w-12 text-center\">\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    className=\"w-4 h-4 rounded border-slate-700 bg-slate-800 text-blue-600 focus:ring-blue-500/20\"\r\n                                    onChange={handleSelectAll}\r\n                                    checked={selectedIds.length === ledgerTransactions.length && ledgerTransactions.length > 0}\r\n                                />\r\n                            </th>\r\n                            <th className=\"p-4 w-32\">Date</th>\r\n                            <th className=\"p-4\">Type</th>\r\n                            <th className=\"p-4 text-right\">Credit</th>\r\n                            <th className=\"p-4 text-right\">Debit</th>\r\n                            <th className=\"p-4 w-16\"></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"divide-y divide-slate-800/50\">\r\n                        {ledgerTransactions.map((t) => {\r\n                            const isCredit = t.type === TRANSACTION_TYPES.CREDIT;\r\n                            const isSelected = selectedIds.includes(t._id || t.id);\r\n                            return (\r\n                                <tr key={t._id || t.id} className={`hover:bg-white/5 transition-colors group ${isSelected ? 'bg-blue-500/5' : ''}`}>\r\n                                    <td className=\"p-4 text-center\">\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            className=\"w-4 h-4 rounded border-slate-700 bg-slate-800 text-blue-600 focus:ring-blue-500/20\"\r\n                                            checked={isSelected}\r\n                                            onChange={() => toggleSelect(t._id || t.id)}\r\n                                        />\r\n                                    </td>\r\n                                    <td className=\"p-4 text-slate-400 text-sm font-mono\">\r\n                                        {new Date(t.date).toLocaleDateString()}\r\n                                    </td>\r\n                                    <td className=\"p-4 text-slate-300 text-sm\">\r\n                                        {t.category}\r\n                                    </td>\r\n                                    <td className=\"p-4 text-right font-mono font-medium text-emerald-400\">\r\n                                        {isCredit ? `₹${t.amount.toLocaleString()}` : '-'}\r\n                                    </td>\r\n                                    <td className=\"p-4 text-right font-mono font-medium text-rose-400\">\r\n                                        {!isCredit ? `₹${t.amount.toLocaleString()}` : '-'}\r\n                                    </td>\r\n                                    <td className=\"p-4 text-center\">\r\n                                        <div className=\"flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100 transition-all\">\r\n                                            <button\r\n                                                onClick={() => setEditingTransaction(t)}\r\n                                                className=\"p-1.5 text-slate-400 hover:text-blue-400 hover:bg-blue-500/10 rounded-lg transition-all\"\r\n                                                title=\"Edit Entry\"\r\n                                            >\r\n                                                <Pencil className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => deleteTransaction(t._id || t.id)}\r\n                                                className=\"p-1.5 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 rounded-lg transition-all\"\r\n                                                title=\"Delete Entry\"\r\n                                            >\r\n                                                <Trash2 className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            );\r\n                        })}\r\n                        {ledgerTransactions.length === 0 && (\r\n                            <tr>\r\n                                <td colSpan=\"5\" className=\"p-8 text-center text-slate-500 italic\">\r\n                                    No additional transactions found for {ledgerName}.\r\n                                </td>\r\n                            </tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            {/* Add/Edit Entry Modal */}\r\n            {(showAddModal || editingTransaction) && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200\">\r\n                    <div className=\"relative w-full max-w-lg\">\r\n                        <button\r\n                            onClick={() => {\r\n                                setShowAddModal(false);\r\n                                setEditingTransaction(null);\r\n                            }}\r\n                            className=\"absolute -top-12 right-0 p-2 text-white/50 hover:text-white bg-white/10 rounded-full backdrop-blur-md transition-colors\"\r\n                        >\r\n                            <X className=\"w-6 h-6\" />\r\n                        </button>\r\n                        <TransactionForm\r\n                            onClose={() => {\r\n                                setShowAddModal(false);\r\n                                setEditingTransaction(null);\r\n                            }}\r\n                            scope={SCOPES.MANAGER}\r\n                            initialData={editingTransaction ? {\r\n                                ...editingTransaction,\r\n                                date: new Date(editingTransaction.date).toISOString().split('T')[0]\r\n                            } : { description: ledgerName }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Import Preview Modal */}\r\n            {importPreviewData && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-in fade-in duration-300\">\r\n                    <div className=\"relative w-full max-w-4xl bg-slate-900 border border-slate-800 rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\">\r\n                        {/* Modal Header */}\r\n                        <div className=\"p-6 border-b border-slate-800 flex items-center justify-between bg-slate-900/50\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"p-2 bg-blue-500/10 text-blue-400 rounded-xl\">\r\n                                    <FileJson className=\"w-6 h-6\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"text-xl font-bold text-white\">Verify Import Details</h3>\r\n                                    <p className=\"text-slate-400 text-sm\">Review {importPreviewData.length} records before adding to {ledgerName}</p>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setImportPreviewData(null)}\r\n                                className=\"p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-full transition-all\"\r\n                            >\r\n                                <X className=\"w-6 h-6\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Modal Content - Scrollable Table */}\r\n                        <div className=\"flex-1 overflow-auto p-6\">\r\n                            <table className=\"w-full text-left border-collapse\">\r\n                                <thead className=\"sticky top-0 bg-slate-900 text-slate-400 text-xs uppercase tracking-wider z-10\">\r\n                                    <tr>\r\n                                        <th className=\"p-3 border-b border-slate-800\">Date</th>\r\n                                        <th className=\"p-3 border-b border-slate-800\">Category</th>\r\n                                        <th className=\"p-3 border-b border-slate-800 text-right\">Credit</th>\r\n                                        <th className=\"p-3 border-b border-slate-800 text-right\">Debit</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"divide-y divide-slate-800/50\">\r\n                                    {importPreviewData.map((t, idx) => (\r\n                                        <tr key={idx} className=\"hover:bg-white/5 transition-colors\">\r\n                                            <td className=\"p-3 text-slate-400 text-sm font-mono\">\r\n                                                {new Date(t.date).toLocaleDateString()}\r\n                                            </td>\r\n                                            <td className=\"p-3 text-slate-300 text-sm\">{t.category}</td>\r\n                                            <td className=\"p-3 text-right font-mono text-emerald-400\">\r\n                                                {t.type === TRANSACTION_TYPES.CREDIT ? `₹${t.amount.toLocaleString()}` : '-'}\r\n                                            </td>\r\n                                            <td className=\"p-3 text-right font-mono text-rose-400\">\r\n                                                {t.type === TRANSACTION_TYPES.DEBIT ? `₹${t.amount.toLocaleString()}` : '-'}\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n\r\n                        {/* Modal Footer */}\r\n                        <div className=\"p-6 border-t border-slate-800 bg-slate-900/50 flex items-center justify-between\">\r\n                            <div className=\"flex items-center gap-2 text-amber-400 text-sm bg-amber-400/10 px-4 py-2 rounded-xl border border-amber-400/20\">\r\n                                <AlertCircle className=\"w-4 h-4\" />\r\n                                <span>Double check dates and amounts</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <button\r\n                                    onClick={() => setImportPreviewData(null)}\r\n                                    className=\"px-6 py-2.5 rounded-xl border border-slate-700 text-slate-300 font-medium hover:bg-slate-800 transition-all\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={confirmImport}\r\n                                    disabled={isImporting}\r\n                                    className={`flex items-center gap-2 px-8 py-2.5 rounded-xl font-bold shadow-lg transition-all active:scale-95 ${isImporting\r\n                                        ? 'bg-slate-700 text-slate-400 cursor-not-allowed'\r\n                                        : 'bg-emerald-600 hover:bg-emerald-500 text-white shadow-emerald-500/20'\r\n                                        }`}\r\n                                >\r\n                                    {isImporting ? (\r\n                                        <>\r\n                                            <div className=\"w-5 h-5 border-2 border-slate-400 border-t-transparent rounded-full animate-spin\" />\r\n                                            Processing...\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <Check className=\"w-5 h-5\" />\r\n                                            Confirm & Import\r\n                                        </>\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LedgerDetailView;\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2749, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/src/components/AccountManagerView.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { Wallet, TrendingUp, TrendingDown, Plus, X } from 'lucide-react';\r\nimport StatsCard from './StatsCard';\r\nimport LedgerTable from './LedgerTable';\r\nimport LedgerForm from './LedgerForm';\r\nimport LedgerDetailView from './LedgerDetailView';\r\nimport { useFinance } from '../context/FinanceContext';\r\nimport { SCOPES, TRANSACTION_TYPES } from '../utils/constants';\r\n\r\nconst AccountManagerView = () => {\r\n    const { transactions, stats } = useFinance(); // Get raw transactions to aggregate\r\n    const [showAddModal, setShowAddModal] = useState(false);\r\n    const [viewMode, setViewMode] = useState('list');\r\n    const [selectedLedgerName, setSelectedLedgerName] = useState(null);\r\n\r\n    // 1. Calculate Aggregated Stats for Ledger Book\r\n    const ledgerStats = useMemo(() => {\r\n        const groups = {};\r\n        // Group by person/ledger (case-insensitive for aggregation, but preserving a display name)\r\n        transactions.forEach(t => {\r\n            if ((t.scope || SCOPES.MANAGER) !== SCOPES.MANAGER) return;\r\n\r\n            const name = (t.description || 'Unknown').trim();\r\n            const key = name.toLowerCase();\r\n\r\n            if (!groups[key]) {\r\n                groups[key] = { balance: 0, displayName: name };\r\n            }\r\n\r\n            const amount = parseFloat(t.amount);\r\n            if (t.type === TRANSACTION_TYPES.CREDIT) {\r\n                groups[key].balance += amount;\r\n            } else {\r\n                groups[key].balance -= amount;\r\n            }\r\n        });\r\n\r\n        // Sum positive balances as Payable (Owe Them), negative as Receivable (They Owe Us)\r\n        let totalReceivables = 0; // Money Owed to Us (Net Debit > Credit)\r\n        let totalPayables = 0;    // Money We Owe (Net Credit > Debit)\r\n        let netBalance = 0;\r\n\r\n        Object.values(groups).forEach(group => {\r\n            netBalance += group.balance;\r\n            if (group.balance < 0) {\r\n                totalReceivables += Math.abs(group.balance);\r\n            } else {\r\n                totalPayables += group.balance;\r\n            }\r\n        });\r\n\r\n        return {\r\n            balance: netBalance,\r\n            totalReceivables,\r\n            totalPayables\r\n        };\r\n    }, [transactions]);\r\n\r\n\r\n    const handleRowClick = (transaction) => {\r\n        setSelectedLedgerName(transaction.description);\r\n        setViewMode('detail');\r\n    };\r\n\r\n    const handleBack = () => {\r\n        setViewMode('list');\r\n        setSelectedLedgerName(null);\r\n    };\r\n\r\n    // Render Detail View\r\n    if (viewMode === 'detail' && selectedLedgerName) {\r\n        return <LedgerDetailView ledgerName={selectedLedgerName} onBack={handleBack} />;\r\n    }\r\n\r\n    // Render Main Dashboard\r\n    return (\r\n        <div className=\"space-y-8 animate-in fade-in slide-in-from-left-8 duration-300\">\r\n            {/* Header & Actions */}\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-white\">Account Manager</h2>\r\n                    <p className=\"text-slate-400 text-sm\">Track salaries, loans, and major funds</p>\r\n                </div>\r\n                <button\r\n                    onClick={() => setShowAddModal(true)}\r\n                    className=\"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-5 py-2.5 rounded-xl font-medium transition-all shadow-lg shadow-blue-500/20 active:scale-95\"\r\n                >\r\n                    <Plus className=\"w-5 h-5\" />\r\n                    Add Ledger\r\n                </button>\r\n            </div>\r\n\r\n            {/* Stats Grid - Using calculated ledgerStats */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                <StatsCard\r\n                    title=\"Net Balance\"\r\n                    amount={ledgerStats.balance}\r\n                    icon={Wallet}\r\n                    type=\"neutral\"\r\n                    trend={2.5}\r\n                />\r\n                <StatsCard\r\n                    title=\"Total Payables (We Owe)\"\r\n                    amount={ledgerStats.totalPayables}\r\n                    icon={TrendingUp}\r\n                    type=\"expense\"\r\n                    trend={12}\r\n                />\r\n                <StatsCard\r\n                    title=\"Total Receivables (Owed to Us)\"\r\n                    amount={ledgerStats.totalReceivables}\r\n                    icon={TrendingDown}\r\n                    type=\"income\"\r\n                    trend={-4}\r\n                />\r\n            </div>\r\n\r\n            {/* Ledger Table Section */}\r\n            <div className=\"space-y-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <h3 className=\"text-lg font-bold text-white\">Ledger Book</h3>\r\n                    <button className=\"text-sm text-blue-400 hover:text-blue-300\">View All</button>\r\n                </div>\r\n                {/* Full width ledger table */}\r\n                <LedgerTable scope={SCOPES.MANAGER} onRowClick={handleRowClick} />\r\n            </div>\r\n\r\n            {/* Add Ledger Modal */}\r\n            {showAddModal && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200\">\r\n                    <div className=\"relative w-full max-w-sm\">\r\n                        <button\r\n                            onClick={() => setShowAddModal(false)}\r\n                            className=\"absolute -top-12 right-0 p-2 text-white/50 hover:text-white bg-white/10 rounded-full backdrop-blur-md transition-colors\"\r\n                        >\r\n                            <X className=\"w-6 h-6\" />\r\n                        </button>\r\n                        <LedgerForm onClose={() => setShowAddModal(false)} />\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AccountManagerView;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3030, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/src/components/TransactionList.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { Trash2, ArrowUpRight, ArrowDownLeft, Loader2 } from 'lucide-react';\r\nimport { useFinance } from '../context/FinanceContext';\r\nimport { TRANSACTION_TYPES, CATEGORY_COLORS, SCOPES } from '../utils/constants';\r\n\r\nconst TransactionList = ({ limit, scope = SCOPES.MANAGER, customData = null }) => {\r\n    const { transactions, deleteTransaction, loading } = useFinance();\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex justify-center p-8\">\r\n                <Loader2 className=\"w-6 h-6 animate-spin text-blue-500\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Use customData if provided, otherwise filter by scope from context\r\n    const filteredTransactions = customData || transactions.filter(t =>\r\n        (t.scope || SCOPES.MANAGER) === scope\r\n    );\r\n\r\n    const displayTransactions = limit ? filteredTransactions.slice(0, limit) : filteredTransactions;\r\n\r\n    if (filteredTransactions.length === 0) {\r\n        return (\r\n            <div className=\"p-8 text-center text-slate-500 bg-slate-900/50 rounded-2xl border border-slate-800 border-dashed\">\r\n                No {scope === SCOPES.MANAGER ? 'account' : 'daily'} transactions yet.\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-3\">\r\n            {displayTransactions.map((t) => {\r\n                // frontend normalization for medical terms\r\n                const medicalKeywords = /medicin|medical|pharmacy|doctor|dr\\.|hospital|clinic|chemist|lab|test|scan|x-ray|blood|health|checkup|consult|tablet|syrup|injection|bandage/i;\r\n                const displayCategory = (medicalKeywords.test(t.description) || medicalKeywords.test(t.category)) ? 'Medical Expense' : t.category;\r\n\r\n                return (\r\n                    <div\r\n                        key={t._id || t.id}\r\n                        className=\"group flex items-center justify-between p-4 rounded-xl bg-slate-900/50 border border-slate-800 hover:bg-slate-800/80 hover:border-slate-700 transition-all cursor-default\"\r\n                    >\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className={`p-2 rounded-full ${t.type === TRANSACTION_TYPES.CREDIT ? 'bg-emerald-500/10 text-emerald-400' : 'bg-rose-500/10 text-rose-400'}`}>\r\n                                {t.type === TRANSACTION_TYPES.CREDIT ? <ArrowDownLeft className=\"w-5 h-5\" /> : <ArrowUpRight className=\"w-5 h-5\" />}\r\n                            </div>\r\n                            <div>\r\n                                <h4 className=\"font-medium text-slate-200\">{t.description}</h4>\r\n                                <div className=\"flex items-center gap-2 text-xs text-slate-500\">\r\n                                    <span>{new Date(t.date).toLocaleDateString()}</span>\r\n                                    <span>•</span>\r\n                                    <span className={CATEGORY_COLORS[displayCategory] || 'text-slate-400'}>{displayCategory}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <span className={`font-bold font-mono ${t.type === TRANSACTION_TYPES.CREDIT ? 'text-emerald-400' : 'text-slate-200'}`}>\r\n                                {t.type === TRANSACTION_TYPES.CREDIT ? '+' : '-'} ₹{t.amount?.toLocaleString()}\r\n                            </span>\r\n                            <button\r\n                                onClick={() => deleteTransaction(t._id || t.id)}\r\n                                className=\"opacity-0 group-hover:opacity-100 p-2 text-slate-500 hover:text-rose-400 hover:bg-rose-500/10 rounded-lg transition-all\"\r\n                                title=\"Delete\"\r\n                            >\r\n                                <Trash2 className=\"w-4 h-4\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TransactionList;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AALA;;;;;;AAOA,MAAM,kBAAkB,CAAC,EAAE,KAAK,EAAE,QAAQ,mIAAM,CAAC,OAAO,EAAE,aAAa,IAAI,EAAE;IACzE,MAAM,EAAE,YAAY,EAAE,iBAAiB,EAAE,OAAO,EAAE,GAAG,IAAA,+IAAU;IAE/D,IAAI,SAAS;QACT,qBACI,8OAAC;YAAI,WAAU;sBACX,cAAA,8OAAC,4NAAO;gBAAC,WAAU;;;;;;;;;;;IAG/B;IAEA,qEAAqE;IACrE,MAAM,uBAAuB,cAAc,aAAa,MAAM,CAAC,CAAA,IAC3D,CAAC,EAAE,KAAK,IAAI,mIAAM,CAAC,OAAO,MAAM;IAGpC,MAAM,sBAAsB,QAAQ,qBAAqB,KAAK,CAAC,GAAG,SAAS;IAE3E,IAAI,qBAAqB,MAAM,KAAK,GAAG;QACnC,qBACI,8OAAC;YAAI,WAAU;;gBAAmG;gBAC1G,UAAU,mIAAM,CAAC,OAAO,GAAG,YAAY;gBAAQ;;;;;;;IAG/D;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACV,oBAAoB,GAAG,CAAC,CAAC;YACtB,2CAA2C;YAC3C,MAAM,kBAAkB;YACxB,MAAM,kBAAkB,AAAC,gBAAgB,IAAI,CAAC,EAAE,WAAW,KAAK,gBAAgB,IAAI,CAAC,EAAE,QAAQ,IAAK,oBAAoB,EAAE,QAAQ;YAElI,qBACI,8OAAC;gBAEG,WAAU;;kCAEV,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAW,CAAC,iBAAiB,EAAE,EAAE,IAAI,KAAK,8IAAiB,CAAC,MAAM,GAAG,uCAAuC,gCAAgC;0CAC5I,EAAE,IAAI,KAAK,8IAAiB,CAAC,MAAM,iBAAG,8OAAC,6OAAa;oCAAC,WAAU;;;;;6FAAe,8OAAC,0OAAY;oCAAC,WAAU;;;;;;;;;;;0CAE3G,8OAAC;;kDACG,8OAAC;wCAAG,WAAU;kDAA8B,EAAE,WAAW;;;;;;kDACzD,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;0DAAM,IAAI,KAAK,EAAE,IAAI,EAAE,kBAAkB;;;;;;0DAC1C,8OAAC;0DAAK;;;;;;0DACN,8OAAC;gDAAK,WAAW,4IAAe,CAAC,gBAAgB,IAAI;0DAAmB;;;;;;;;;;;;;;;;;;;;;;;;kCAKpF,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAK,WAAW,CAAC,oBAAoB,EAAE,EAAE,IAAI,KAAK,8IAAiB,CAAC,MAAM,GAAG,qBAAqB,kBAAkB;;oCAChH,EAAE,IAAI,KAAK,8IAAiB,CAAC,MAAM,GAAG,MAAM;oCAAI;oCAAG,EAAE,MAAM,EAAE;;;;;;;0CAElE,8OAAC;gCACG,SAAS,IAAM,kBAAkB,EAAE,GAAG,IAAI,EAAE,EAAE;gCAC9C,WAAU;gCACV,OAAM;0CAEN,cAAA,8OAAC,oNAAM;oCAAC,WAAU;;;;;;;;;;;;;;;;;;eA1BrB,EAAE,GAAG,IAAI,EAAE,EAAE;;;;;QA+B9B;;;;;;AAGZ;uCAEe"}},
    {"offset": {"line": 3223, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/src/components/CalendarView.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useMemo, useState } from 'react';\r\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\r\nimport { SCOPES, TRANSACTION_TYPES } from '../utils/constants';\r\nimport { useFinance } from '../context/FinanceContext';\r\n\r\nconst CalendarView = () => {\r\n    const { transactions } = useFinance();\r\n    const [currentDate, setCurrentDate] = useState(new Date());\r\n\r\n    // Get Daily Expenses\r\n    const dailyExpenses = useMemo(() => {\r\n        return transactions.filter(t => (t.scope || 'manager') === SCOPES.DAILY);\r\n    }, [transactions]);\r\n\r\n    // Calculate totals per day for the current month\r\n    const daysInMonth = useMemo(() => {\r\n        const year = currentDate.getFullYear();\r\n        const month = currentDate.getMonth();\r\n        const days = new Date(year, month + 1, 0).getDate();\r\n        const firstDay = new Date(year, month, 1).getDay(); // 0 = Sunday\r\n\r\n        const dayList = [];\r\n\r\n        // Pad empty days\r\n        for (let i = 0; i < firstDay; i++) {\r\n            dayList.push(null);\r\n        }\r\n\r\n        // Fill actual days\r\n        for (let i = 1; i <= days; i++) {\r\n            const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;\r\n\r\n            // Sum expenses for this day\r\n            const dayTotal = dailyExpenses\r\n                .filter(t => t.date.startsWith(dateStr) && t.type === TRANSACTION_TYPES.DEBIT)\r\n                .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n            dayList.push({ day: i, total: dayTotal, date: dateStr });\r\n        }\r\n        return dayList;\r\n    }, [currentDate, dailyExpenses]);\r\n\r\n    const prevMonth = () => {\r\n        setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1));\r\n    };\r\n\r\n    const nextMonth = () => {\r\n        setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1));\r\n    };\r\n\r\n    const monthName = currentDate.toLocaleString('default', { month: 'long', year: 'numeric' });\r\n\r\n    return (\r\n        <div className=\"bg-slate-900/50 p-6 rounded-2xl border border-slate-800\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n                <h3 className=\"text-lg font-bold text-white flex items-center gap-2\">\r\n                    Daily Tracker\r\n                </h3>\r\n                <div className=\"flex items-center gap-2 bg-slate-800 rounded-lg p-1\">\r\n                    <button onClick={prevMonth} className=\"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white\">\r\n                        <ChevronLeft className=\"w-5 h-5\" />\r\n                    </button>\r\n                    <span className=\"text-sm font-medium text-white min-w-[120px] text-center\">{monthName}</span>\r\n                    <button onClick={nextMonth} className=\"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white\">\r\n                        <ChevronRight className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-7 gap-2 mb-2\">\r\n                {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(d => (\r\n                    <div key={d} className=\"text-center text-xs text-slate-500 font-medium py-2\">\r\n                        {d}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-7 gap-2\">\r\n                {daysInMonth.map((d, idx) => (\r\n                    <div\r\n                        key={idx}\r\n                        className={`min-h-[80px] rounded-xl p-2 border transition-all ${d\r\n                            ? 'bg-slate-800/30 border-slate-700/50 hover:bg-slate-800/50'\r\n                            : 'bg-transparent border-transparent'\r\n                            }`}\r\n                    >\r\n                        {d && (\r\n                            <div className=\"h-full flex flex-col justify-between\">\r\n                                <span className={`text-xs font-bold ${new Date().toDateString() === new Date(d.date).toDateString()\r\n                                    ? 'text-blue-400 bg-blue-500/10 w-fit px-1.5 rounded'\r\n                                    : 'text-slate-400'\r\n                                    }`}>\r\n                                    {d.day}\r\n                                </span>\r\n                                {d.total > 0 && (\r\n                                    <span className=\"text-[10px] sm:text-xs font-mono font-bold text-rose-400 break-words leading-tight mt-1\">\r\n                                        ₹{d.total.toLocaleString()}\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CalendarView;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3429, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/src/components/DailyExpensesView.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { Coffee, TrendingDown, Plus, X, Calendar, Search, Filter, ArrowUpDown, Clock } from 'lucide-react';\r\nimport StatsCard from './StatsCard';\r\nimport TransactionList from './TransactionList';\r\nimport TransactionForm from './TransactionForm';\r\nimport CalendarView from './CalendarView';\r\nimport { useFinance } from '../context/FinanceContext';\r\nimport { SCOPES } from '../utils/constants';\r\n\r\nconst DailyExpensesView = () => {\r\n    const { stats, transactions } = useFinance();\r\n    const [showAddModal, setShowAddModal] = useState(false);\r\n    const [showAll, setShowAll] = useState(false);\r\n\r\n    // Filter & Sort States\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [categoryFilter, setCategoryFilter] = useState('');\r\n    const [sortBy, setSortBy] = useState('newest');\r\n\r\n    // Time Range State\r\n    const [timeRange, setTimeRange] = useState('today');\r\n\r\n    const dailyStats = stats(SCOPES.DAILY);\r\n\r\n    // DEBUGGING: Log to chrome console\r\n    // console.log(\"All Transactions:\", transactions);\r\n    // console.log(\"Daily Scoped:\", transactions.filter(t => (t.scope || 'manager') === SCOPES.DAILY));\r\n\r\n    // Dynamic Categories from Data\r\n    const availableCategories = useMemo(() => {\r\n        const dailyTxns = transactions.filter(t => (t.scope || 'manager') === SCOPES.DAILY);\r\n        const cats = new Set(dailyTxns.map(t => t.category).filter(Boolean));\r\n        return Array.from(cats).sort();\r\n    }, [transactions]);\r\n\r\n    // Calculate Spend based on Time Range\r\n    const timeRangeSpend = useMemo(() => {\r\n        const now = new Date();\r\n        const todayStr = now.toISOString().split('T')[0];\r\n\r\n        // Helper to reset time to midnight\r\n        const stripTime = (d) => new Date(d.getFullYear(), d.getMonth(), d.getDate());\r\n        const todayDate = stripTime(now);\r\n\r\n        const dailyTxns = transactions.filter(t => (t.scope || 'manager') === SCOPES.DAILY);\r\n\r\n        return dailyTxns.reduce((sum, t) => {\r\n            const tDate = stripTime(new Date(t.date));\r\n            const diffTime = todayDate - tDate;\r\n            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n            let include = false;\r\n\r\n            switch (timeRange) {\r\n                case 'today':\r\n                    include = diffDays === 0;\r\n                    break;\r\n                case 'yesterday':\r\n                    include = diffDays === 1;\r\n                    break;\r\n                case 'week': // This Week (Sunday to Today)\r\n                    const dayOfWeek = now.getDay(); // 0 is Sunday\r\n                    include = diffDays <= dayOfWeek;\r\n                    break;\r\n                case 'month': // This Month\r\n                    include = tDate.getMonth() === now.getMonth() && tDate.getFullYear() === now.getFullYear();\r\n                    break;\r\n                case 'year': // This Year\r\n                    include = tDate.getFullYear() === now.getFullYear();\r\n                    break;\r\n                case 'last10':\r\n                    include = diffDays >= 0 && diffDays < 10;\r\n                    break;\r\n                case 'last20':\r\n                    include = diffDays >= 0 && diffDays < 20;\r\n                    break;\r\n                default:\r\n                    include = false;\r\n            }\r\n\r\n            return include ? sum + (t.amount || 0) : sum;\r\n        }, 0);\r\n    }, [transactions, timeRange]);\r\n\r\n    // Filter & Sort Logic for List\r\n    const processedTransactions = useMemo(() => {\r\n        let result = transactions.filter(t => {\r\n            const isDaily = (t.scope || 'manager') === SCOPES.DAILY;\r\n            const matchesSearch = t.description.toLowerCase().includes(searchTerm.toLowerCase());\r\n            const matchesCategory = categoryFilter ? t.category === categoryFilter : true;\r\n            return isDaily && matchesSearch && matchesCategory;\r\n        });\r\n\r\n        // Sort\r\n        result.sort((a, b) => {\r\n            if (sortBy === 'newest') return new Date(b.date) - new Date(a.date);\r\n            if (sortBy === 'oldest') return new Date(a.date) - new Date(b.date);\r\n            if (sortBy === 'highest') return b.amount - a.amount;\r\n            if (sortBy === 'lowest') return a.amount - b.amount;\r\n            return 0;\r\n        });\r\n\r\n        return result;\r\n    }, [transactions, searchTerm, categoryFilter, sortBy]);\r\n\r\n    const rangeLabels = {\r\n        today: 'Spent Today',\r\n        yesterday: 'Spent Yesterday',\r\n        week: 'Spent This Week',\r\n        month: 'Spent This Month',\r\n        year: 'Spent This Year',\r\n        last10: 'Spent Last 10 Days',\r\n        last20: 'Spent Last 20 Days'\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-in fade-in slide-in-from-right-8 duration-300\">\r\n            {/* Header & Actions */}\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-white\">Daily Expenses</h2>\r\n                    <p className=\"text-slate-400 text-sm\">Track day-to-day spending</p>\r\n                </div>\r\n                <button\r\n                    onClick={() => setShowAddModal(true)}\r\n                    className=\"flex items-center gap-2 bg-orange-600 hover:bg-orange-500 text-white px-5 py-2.5 rounded-xl font-medium transition-all shadow-lg shadow-orange-500/20 active:scale-95\"\r\n                >\r\n                    <Plus className=\"w-5 h-5\" />\r\n                    Add Expense\r\n                </button>\r\n            </div>\r\n\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <StatsCard\r\n                    title=\"Total Spend (All Time)\"\r\n                    amount={dailyStats.totalExpense}\r\n                    icon={Coffee}\r\n                    type=\"expense\"\r\n                />\r\n\r\n                {/* Time Range Stats Card */}\r\n                <StatsCard\r\n                    title={\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <span>Spent</span>\r\n                            <div className=\"relative group/select\">\r\n                                <select\r\n                                    value={timeRange}\r\n                                    onChange={(e) => setTimeRange(e.target.value)}\r\n                                    className=\"bg-transparent border-none text-sm font-bold text-blue-400 focus:ring-0 focus:outline-none cursor-pointer py-0 pr-6 hover:text-blue-300 transition-colors appearance-none\"\r\n                                >\r\n                                    <option className=\"bg-slate-900 text-slate-300\" value=\"today\">Today</option>\r\n                                    <option className=\"bg-slate-900 text-slate-300\" value=\"yesterday\">Yesterday</option>\r\n                                    <option className=\"bg-slate-900 text-slate-300\" value=\"week\">This Week</option>\r\n                                    <option className=\"bg-slate-900 text-slate-300\" value=\"month\">This Month</option>\r\n                                    <option className=\"bg-slate-900 text-slate-300\" value=\"year\">This Year</option>\r\n                                    <option className=\"bg-slate-900 text-slate-300\" value=\"last10\">Last 10 Days</option>\r\n                                    <option className=\"bg-slate-900 text-slate-300\" value=\"last20\">Last 20 Days</option>\r\n                                </select>\r\n                                <ArrowUpDown className=\"absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 text-blue-400 pointer-events-none opacity-50 group-hover/select:opacity-100 transition-opacity\" />\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    amount={timeRangeSpend}\r\n                    icon={TrendingDown}\r\n                    type=\"expense\"\r\n                />\r\n            </div>\r\n\r\n            {/* Recent Transactions */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    {/* Filter & Sort Bar */}\r\n                    <div className=\"flex flex-col gap-4 mb-6\">\r\n                        <div className=\"flex flex-col sm:flex-row gap-4\">\r\n                            {/* Search */}\r\n                            <div className=\"relative flex-1\">\r\n                                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500\" />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Search expenses...\"\r\n                                    value={searchTerm}\r\n                                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                                    className=\"w-full bg-slate-900/50 border border-slate-700 rounded-xl py-2 pl-10 pr-4 text-sm text-white focus:outline-none focus:border-orange-500 transition-colors\"\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Category Filter */}\r\n                            <div className=\"relative w-full sm:w-48\">\r\n                                <Filter className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500\" />\r\n                                <select\r\n                                    value={categoryFilter}\r\n                                    onChange={(e) => setCategoryFilter(e.target.value)}\r\n                                    className=\"w-full bg-slate-900/50 border border-slate-700 rounded-xl py-2 pl-10 pr-4 text-sm text-white focus:outline-none focus:border-orange-500 appearance-none cursor-pointer\"\r\n                                >\r\n                                    <option value=\"\">All Categories</option>\r\n                                    {availableCategories.map(cat => (\r\n                                        <option key={cat} value={cat}>{cat}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n\r\n                            {/* Sort By */}\r\n                            <div className=\"relative w-full sm:w-48\">\r\n                                <ArrowUpDown className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500\" />\r\n                                <select\r\n                                    value={sortBy}\r\n                                    onChange={(e) => setSortBy(e.target.value)}\r\n                                    className=\"w-full bg-slate-900/50 border border-slate-700 rounded-xl py-2 pl-10 pr-4 text-sm text-white focus:outline-none focus:border-orange-500 appearance-none cursor-pointer\"\r\n                                >\r\n                                    <option value=\"newest\">Newest First</option>\r\n                                    <option value=\"oldest\">Oldest First</option>\r\n                                    <option value=\"highest\">Highest Amount</option>\r\n                                    <option value=\"lowest\">Lowest Amount</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                        <h3 className=\"text-lg font-bold text-white\">\r\n                            {showAll || searchTerm || categoryFilter ? 'Filtered List' : 'Recent Daily Items'}\r\n                        </h3>\r\n                        <button\r\n                            onClick={() => setShowAll(!showAll)}\r\n                            className=\"text-sm text-blue-400 hover:text-blue-300\"\r\n                        >\r\n                            {(searchTerm || categoryFilter) ? `Found ${processedTransactions.length} items` : (showAll ? 'Show Less' : 'View All')}\r\n                        </button>\r\n                    </div>\r\n\r\n                    <TransactionList\r\n                        customData={(showAll || searchTerm || categoryFilter) ? processedTransactions : processedTransactions.slice(0, 10)}\r\n                        scope={SCOPES.DAILY}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"h-fit\">\r\n                    <CalendarView />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Add Transaction Modal */}\r\n            {showAddModal && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200\">\r\n                    <div className=\"relative w-full max-w-lg\">\r\n                        <button\r\n                            onClick={() => setShowAddModal(false)}\r\n                            className=\"absolute -top-12 right-0 p-2 text-white/50 hover:text-white bg-white/10 rounded-full backdrop-blur-md transition-colors\"\r\n                        >\r\n                            <X className=\"w-6 h-6\" />\r\n                        </button>\r\n                        <TransactionForm onClose={() => setShowAddModal(false)} scope={SCOPES.DAILY} />\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DailyExpensesView;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4005, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/src/components/ReportsView.jsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useMemo } from 'react';\nimport {\n    PieChart, Pie, Cell, ResponsiveContainer, Tooltip as RechartsTooltip, Legend,\n    BarChart, Bar, XAxis, YAxis, CartesianGrid\n} from 'recharts';\nimport { Download, TrendingUp, PieChart as PieIcon }\n    from 'lucide-react';\nimport { useFinance } from '../context/FinanceContext';\nimport { SCOPES } from '../utils/constants';\n\nconst COLORS = ['#F59E0B', '#3B82F6', '#10B981', '#EF4444', '#8B5CF6', '#EC4899', '#6366F1', '#14B8A6'];\n\nconst ReportsView = () => {\n    const { transactions } = useFinance();\n\n    // 1. Process Data for Category Pie Chart (Daily Expenses Only)\n    const categoryData = useMemo(() => {\n        const dailyTxns = transactions.filter(t => (t.scope || 'manager') === SCOPES.DAILY);\n        const catMap = {};\n\n        dailyTxns.forEach(t => {\n            if (t.type === 'Money Out') {\n                let cat = t.category || 'Uncategorized';\n\n                // --- FRONTEND NORMALIZATION ---\n                // Force all medical-related terms to \"Medical Expense\"\n                const medicalKeywords = /medicin|medical|pharmacy|doctor|dr\\.|hospital|clinic|chemist|lab|test|scan|x-ray|blood|health|checkup|consult|tablet|syrup|injection|bandage/i;\n\n                if (medicalKeywords.test(cat) || medicalKeywords.test(t.description)) {\n                    cat = 'Medical Expense';\n                }\n                // -----------------------------\n\n                catMap[cat] = (catMap[cat] || 0) + (t.amount || 0);\n            }\n        });\n\n        const sorted = Object.entries(catMap)\n            .map(([name, value]) => ({ name, value }))\n            .sort((a, b) => b.value - a.value);\n\n        // Group into Top 5 + Others\n        if (sorted.length > 5) {\n            const top5 = sorted.slice(0, 5);\n            const othersValue = sorted.slice(5).reduce((sum, item) => sum + item.value, 0);\n            return [...top5, { name: 'Others', value: othersValue }];\n        }\n\n        return sorted;\n    }, [transactions]);\n\n    // 2. Process Data for Monthly Trends (Last 6 Months)\n    const trendData = useMemo(() => {\n        const dailyTxns = transactions.filter(t => (t.scope || 'manager') === SCOPES.DAILY && t.type === 'Money Out');\n        const monthMap = {};\n\n        // Init last 6 months\n        for (let i = 5; i >= 0; i--) {\n            const d = new Date();\n            d.setMonth(d.getMonth() - i);\n            const key = d.toLocaleString('default', { month: 'short', year: '2-digit' });\n            monthMap[key] = 0;\n        }\n\n        dailyTxns.forEach(t => {\n            const d = new Date(t.date);\n            const key = d.toLocaleString('default', { month: 'short', year: '2-digit' });\n            if (monthMap.hasOwnProperty(key)) {\n                monthMap[key] += t.amount || 0;\n            }\n        });\n\n        return Object.entries(monthMap).map(([name, amount]) => ({ name, amount }));\n    }, [transactions]);\n\n    // 3. Export to CSV Handler\n    const handleExportCSV = () => {\n        const headers = ['Date', 'Category', 'Description', 'Type', 'Amount', 'Scope'];\n        const rows = transactions.map(t => [\n            new Date(t.date).toLocaleDateString(),\n            t.category || '',\n            `\"${(t.description || '').replace(/\"/g, '\"\"')}\"`, // Escape quotes\n            t.type,\n            t.amount,\n            t.scope || 'manager'\n        ]);\n\n        const csvContent = [\n            headers.join(','),\n            ...rows.map(r => r.join(','))\n        ].join('\\n');\n\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.setAttribute('href', url);\n        link.setAttribute('download', `transactions_export_${new Date().toISOString().split('T')[0]}.csv`);\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n    };\n\n    const CustomTooltip = ({ active, payload, label }) => {\n        if (active && payload && payload.length) {\n            return (\n                <div className=\"bg-slate-900 border border-slate-700 p-3 rounded-xl shadow-xl\">\n                    <p className=\"text-slate-300 text-xs font-medium mb-1\">{label || payload[0].name}</p>\n                    <p className=\"text-white text-lg font-bold\">\n                        ₹{payload[0].value.toLocaleString('en-IN')}\n                    </p>\n                </div>\n            );\n        }\n        return null;\n    };\n\n    return (\n        <div className=\"space-y-8 animate-in fade-in slide-in-from-right-8 duration-300 pb-10\">\n            {/* Header */}\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <h2 className=\"text-2xl font-bold text-white\">Financial Reports</h2>\n                    <p className=\"text-slate-400 text-sm\">Visual insights into your daily spending</p>\n                </div>\n                <button\n                    onClick={handleExportCSV}\n                    className=\"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-5 py-2.5 rounded-xl font-medium transition-all border border-slate-700 active:scale-95\"\n                >\n                    <Download className=\"w-4 h-4\" />\n                    Export CSV\n                </button>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                {/* Category Pie Chart */}\n                <div className=\"bg-slate-900/50 border border-slate-800 rounded-3xl p-6 backdrop-blur-sm\">\n                    <div className=\"flex items-center gap-3 mb-6\">\n                        <div className=\"p-3 bg-orange-500/10 rounded-xl text-orange-500\">\n                            <PieIcon className=\"w-5 h-5\" />\n                        </div>\n                        <h3 className=\"text-lg font-bold text-white\">Expense Breakdown</h3>\n                    </div>\n\n                    <div className=\"h-[300px] w-full\">\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                            <PieChart>\n                                <Pie\n                                    data={categoryData}\n                                    cx=\"50%\"\n                                    cy=\"50%\"\n                                    innerRadius={60}\n                                    outerRadius={80}\n                                    paddingAngle={5}\n                                    dataKey=\"value\"\n                                >\n                                    {categoryData.map((entry, index) => (\n                                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} stroke=\"rgba(0,0,0,0.2)\" />\n                                    ))}\n                                </Pie>\n                                <RechartsTooltip content={<CustomTooltip />} />\n                                <Legend\n                                    layout=\"vertical\"\n                                    verticalAlign=\"middle\"\n                                    align=\"right\"\n                                    wrapperStyle={{ fontSize: '12px', color: '#94a3b8' }}\n                                />\n                            </PieChart>\n                        </ResponsiveContainer>\n                    </div>\n                </div>\n\n                {/* Monthly Trend Bar Chart */}\n                <div className=\"bg-slate-900/50 border border-slate-800 rounded-3xl p-6 backdrop-blur-sm\">\n                    <div className=\"flex items-center gap-3 mb-6\">\n                        <div className=\"p-3 bg-blue-500/10 rounded-xl text-blue-500\">\n                            <TrendingUp className=\"w-5 h-5\" />\n                        </div>\n                        <h3 className=\"text-lg font-bold text-white\">6-Month Trend</h3>\n                    </div>\n\n                    <div className=\"h-[300px] w-full\">\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                            <BarChart data={trendData} margin={{ top: 10, right: 10, left: -20, bottom: 0 }}>\n                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#1e293b\" />\n                                <XAxis\n                                    dataKey=\"name\"\n                                    axisLine={false}\n                                    tickLine={false}\n                                    tick={{ fill: '#64748b', fontSize: 12 }}\n                                    dy={10}\n                                />\n                                <YAxis\n                                    axisLine={false}\n                                    tickLine={false}\n                                    tick={{ fill: '#64748b', fontSize: 10 }}\n                                    tickFormatter={(value) => `₹${value / 1000}k`}\n                                />\n                                <RechartsTooltip content={<CustomTooltip />} cursor={{ fill: 'rgba(255,255,255,0.05)' }} />\n                                <Bar dataKey=\"amount\" fill=\"#3B82F6\" radius={[4, 4, 0, 0]} maxBarSize={50} />\n                            </BarChart>\n                        </ResponsiveContainer>\n                    </div>\n                </div>\n            </div>\n\n            {/* Quick Stats Summary */}\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                {categoryData.slice(0, 4).map((cat, idx) => (\n                    <div key={cat.name} className=\"bg-slate-900 border border-slate-800 p-4 rounded-xl\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                            <div className=\"w-2 h-2 rounded-full\" style={{ backgroundColor: COLORS[idx % COLORS.length] }} />\n                            <p className=\"text-slate-400 text-xs truncate\">{cat.name}</p>\n                        </div>\n                        <p className=\"text-white font-bold\">₹{cat.value.toLocaleString('en-IN')}</p>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default ReportsView;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4554, "column": 0}, "map": {"version":3,"sources":["file:///D:/Account%20Manager/account-manager-app/app/page.js"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { FinanceProvider } from '@/src/context/FinanceContext';\r\nimport Layout from '@/src/components/Layout';\r\nimport AccountManagerView from '@/src/components/AccountManagerView';\r\nimport DailyExpensesView from '@/src/components/DailyExpensesView';\r\nimport ReportsView from '@/src/components/ReportsView';\r\n\r\nexport default function Home() {\r\n    const [activeTab, setActiveTab] = useState('manager');\r\n\r\n    const renderContent = () => {\r\n        switch (activeTab) {\r\n            case 'manager':\r\n                return <AccountManagerView />;\r\n            case 'daily':\r\n                return <DailyExpensesView />;\r\n            case 'reports':\r\n                return <ReportsView />;\r\n            default:\r\n                return <AccountManagerView />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <FinanceProvider>\r\n            <Layout activeTab={activeTab} setActiveTab={setActiveTab}>\r\n                {renderContent()}\r\n            </Layout>\r\n        </FinanceProvider>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASe,SAAS;IACpB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,MAAM,gBAAgB;QAClB,OAAQ;YACJ,KAAK;gBACD,qBAAO,8OAAC,mJAAkB;;;;;YAC9B,KAAK;gBACD,qBAAO,8OAAC,kJAAiB;;;;;YAC7B,KAAK;gBACD,qBAAO,8OAAC,4IAAW;;;;;YACvB;gBACI,qBAAO,8OAAC,mJAAkB;;;;;QAClC;IACJ;IAEA,qBACI,8OAAC,oJAAe;kBACZ,cAAA,8OAAC,uIAAM;YAAC,WAAW;YAAW,cAAc;sBACvC;;;;;;;;;;;AAIjB"}}]
}